{"version":3,"sources":["assets/js/module.event.js"],"names":["calendarEvents","firstLoadCalendar","today","moment","format","events","year","createEventObject","data","tempEventObject","next_pickups","trash","day","recycling","dayOfWeek","AorB","week","startDate","next_pickup","bulk","yard","getWeekNumber","d","Date","setHours","setDate","getDate","getDay","yearStart","getFullYear","weekNo","Math","ceil","weeksInYear","month","capitalizeFirstLetter","string","charAt","toUpperCase","slice","addEventToList","addeEventToList","weeks","eventType","eventInfo","endDate","i","title","eventObj","start","color","schedule","push","undefined","isBetween","parseInt","loadEmergencyEventInfo","emergencyObjArr","tempHtml","alertCount","forEach","item","type","normalDay","description","note","newDay","tempWidth","window","innerWidth","document","body","clientWidth","querySelector","innerHTML","getElementById","className","addEventListener","closeDisplayEmergencyEvent","displayEmergencyEvent","length","startCalendar","sendData","routeIDs","listOfEvents","todaysMonth","todaysYear","$","ajax","url","dataType","success","response","yardWasteStart","yardWasteEnd","details","service","fullCalendar","customButtons","printButton","text","click","print","header","left","center","right","defaultDate","navLinks","editable","error","request","startCalendarServices","tempAddr","split","value","newTempAddr","size","index","lng","lat","getJSON","features","attributes","FID","closeCalendar","loadCalendarNow","sendSignUpRequest","params","Object","keys","map","k","encodeURIComponent","join","xhr","XMLHttpRequest","ActiveXObject","open","onload","readyState","trunc","status","responseText","setRequestHeader","e","send","stripPhoneNumber","number","newNumber","checkIfPhoneValid","phoneNumber","a","test","servicesSignup","serviceCheckList","querySelectorAll","checked","name","closePhoneValidationAlert","alertBox","target","parentNode","phoneValidationAlert","b"],"mappings":"AAAA,IAAIA,cAAc,GAAI,YAAU;AAC9B,MAAIC,iBAAiB,GAAG,IAAxB;AACA,MAAIC,KAAK,GAAGC,MAAM,GAAGC,MAAT,EAAZ,CAF8B,CAG9B;;AACA,MAAIC,MAAM,GAAG,EAAb;AACA,MAAIC,IAAI,GAAGH,MAAM,GAAGG,IAAT,EAAX;;AACA,MAAIC,iBAAiB,GAAG,SAASA,iBAAT,CAA2BC,IAA3B,EAAiC;AACzD;AACE,QAAKC,eAAe,GAAG;AACrB,eAAS;AACP,qBAAaD,IAAI,CAACE,YAAL,CAAkBC,KAAlB,CAAwBC,GAD9B;AAEP,oBAAY,QAFL;AAGP,gBAAQ,IAHD;AAIP,qBAAa,IAJN;AAKP,mBAAW;AALJ,OADY;AAQrB,mBAAa;AACX,qBAAa,IADF;AAEX,oBAAY,UAFD;AAGX,gBAAQ,IAHG;AAIX,qBAAa,IAJF;AAKX,mBAAW;AALA,OARQ;AAerB,cAAQ;AACN,qBAAa,IADP;AAEN,oBAAY,UAFN;AAGN,gBAAQ,IAHF;AAIN,qBAAa,IAJP;AAKN,mBAAW;AALL,OAfa;AAsBrB,cAAQ;AACN,qBAAa,IADP;AAEN,oBAAY,UAFN;AAGN,gBAAQ,IAHF;AAIN,qBAAa,IAJP;AAKN,mBAAW;AALL;AAtBa,KAAvB;AA8BAH,IAAAA,eAAe,CAACI,SAAhB,CAA0BC,SAA1B,GAAsCN,IAAI,CAACE,YAAL,CAAkBG,SAAlB,CAA4BD,GAAlE;AACAH,IAAAA,eAAe,CAACI,SAAhB,CAA0BE,IAA1B,GAAiCP,IAAI,CAACE,YAAL,CAAkBG,SAAlB,CAA4BG,IAA7D;AACAP,IAAAA,eAAe,CAACI,SAAhB,CAA0BI,SAA1B,GAAsCT,IAAI,CAACE,YAAL,CAAkBG,SAAlB,CAA4BK,WAAlE;AAEAT,IAAAA,eAAe,CAACU,IAAhB,CAAqBL,SAArB,GAAiCN,IAAI,CAACE,YAAL,CAAkBS,IAAlB,CAAuBP,GAAxD;AACAH,IAAAA,eAAe,CAACU,IAAhB,CAAqBJ,IAArB,GAA4BP,IAAI,CAACE,YAAL,CAAkBS,IAAlB,CAAuBH,IAAnD;AACAP,IAAAA,eAAe,CAACU,IAAhB,CAAqBF,SAArB,GAAiCT,IAAI,CAACE,YAAL,CAAkBS,IAAlB,CAAuBD,WAAxD;AAEAT,IAAAA,eAAe,CAACE,KAAhB,CAAsBG,SAAtB,GAAkCN,IAAI,CAACE,YAAL,CAAkBC,KAAlB,CAAwBC,GAA1D;AACAH,IAAAA,eAAe,CAACE,KAAhB,CAAsBI,IAAtB,GAA6BP,IAAI,CAACE,YAAL,CAAkBC,KAAlB,CAAwBK,IAArD;AACAP,IAAAA,eAAe,CAACE,KAAhB,CAAsBM,SAAtB,GAAkCT,IAAI,CAACE,YAAL,CAAkBC,KAAlB,CAAwBO,WAA1D;AAEAT,IAAAA,eAAe,CAACW,IAAhB,CAAqBN,SAArB,GAAiCN,IAAI,CAACE,YAAL,CAAkBC,KAAlB,CAAwBC,GAAzD;AACAH,IAAAA,eAAe,CAACW,IAAhB,CAAqBL,IAArB,GAA4BP,IAAI,CAACE,YAAL,CAAkBC,KAAlB,CAAwBK,IAApD;AAEI,WAAOP,eAAP;AACL,GAhDD;;AAiDA,WAASY,aAAT,CAAuBC,CAAvB,EAA0B;AACxB;AACAA,IAAAA,CAAC,GAAG,IAAIC,IAAJ,CAAS,CAACD,CAAV,CAAJ;AACAA,IAAAA,CAAC,CAACE,QAAF,CAAW,CAAX,EAAa,CAAb,EAAe,CAAf,EAHwB,CAIxB;AACA;;AACAF,IAAAA,CAAC,CAACG,OAAF,CAAUH,CAAC,CAACI,OAAF,KAAc,CAAd,IAAmBJ,CAAC,CAACK,MAAF,MAAY,CAA/B,CAAV,EANwB,CAOxB;;AACA,QAAIC,SAAS,GAAG,IAAIL,IAAJ,CAASD,CAAC,CAACO,WAAF,EAAT,EAAyB,CAAzB,EAA2B,CAA3B,CAAhB,CARwB,CASxB;AACA;;AACA,QAAIC,MAAM,GAAGC,IAAI,CAACC,IAAL,CAAU,CAAI,CAACV,CAAC,GAAGM,SAAL,IAAkB,QAApB,GAAgC,CAAlC,IAAqC,CAA/C,CAAb,CAXwB,CAYxB;;AACA,WAAO,CAACN,CAAC,CAACO,WAAF,EAAD,EAAkBC,MAAlB,CAAP;AACD;;AAED,WAASG,WAAT,CAAqB3B,IAArB,EAA2B;AACzB,QAAI4B,KAAK,GAAG,EAAZ;AAAA,QAAgBtB,GAAG,GAAG,EAAtB;AAAA,QAA0BI,IAA1B,CADyB,CAEzB;AACA;;AACA,OAAG;AACDM,MAAAA,CAAC,GAAG,IAAIC,IAAJ,CAASjB,IAAT,EAAe4B,KAAf,EAAsBtB,GAAG,EAAzB,CAAJ;AACAI,MAAAA,IAAI,GAAGK,aAAa,CAACC,CAAD,CAAb,CAAiB,CAAjB,CAAP;AACD,KAHD,QAGSN,IAAI,IAAI,CAHjB;;AAIA,WAAOA,IAAP;AACD;;AACD,WAASmB,qBAAT,CAA+BC,MAA/B,EAAuC;AACnC,WAAOA,MAAM,CAACC,MAAP,CAAc,CAAd,EAAiBC,WAAjB,KAAiCF,MAAM,CAACG,KAAP,CAAa,CAAb,CAAxC;AACH;;AACD,MAAIC,cAAc,GAAG,SAASC,eAAT,CAAyBnC,IAAzB,EAA8BoC,KAA9B,EAAoCC,SAApC,EAA8CC,SAA9C,EAAwD3B,SAAxD,EAAmE4B,OAAnE,EAA4E;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,KAApB,EAA2BI,CAAC,EAA5B,EAAgC;AAC9B,UAAIC,KAAK,GAAGJ,SAAS,GAAG,UAAxB;AACA,UAAIK,QAAQ,GAAG;AACbD,QAAAA,KAAK,EAAGA,KADK;AAEbE,QAAAA,KAAK,EAAG;AAFK,OAAf;;AAIA,cAAQN,SAAR;AACE,aAAK,SAAL;AACIK,UAAAA,QAAQ,CAACE,KAAT,GAAiB,SAAjB;AACEF,UAAAA,QAAQ,CAACC,KAAT,GAAiB9C,MAAM,GAAGG,IAAT,CAAcA,IAAd,EAAoBU,IAApB,CAAyB8B,CAAzB,EAA4BlC,GAA5B,CAAgCgC,SAAS,CAAC9B,SAA1C,EAAqDV,MAArD,CAA4D,YAA5D,CAAjB;AACJ;;AAEF,aAAK,SAAL;AACI4C,UAAAA,QAAQ,CAACE,KAAT,GAAiB,SAAjB;AACEF,UAAAA,QAAQ,CAACC,KAAT,GAAiB9C,MAAM,GAAGG,IAAT,CAAcA,IAAd,EAAoBU,IAApB,CAAyB8B,CAAzB,EAA4BlC,GAA5B,CAAgCgC,SAAS,CAAC9B,SAA1C,EAAqDV,MAArD,CAA4D,YAA5D,CAAjB;AACJ;;AAEF,aAAK,YAAL;AACI4C,UAAAA,QAAQ,CAACE,KAAT,GAAiB,SAAjB;AACEF,UAAAA,QAAQ,CAACC,KAAT,GAAiB9C,MAAM,GAAGG,IAAT,CAAcA,IAAd,EAAoBU,IAApB,CAAyB8B,CAAzB,EAA4BlC,GAA5B,CAAgCgC,SAAS,CAAC9B,SAA1C,EAAqDV,MAArD,CAA4D,YAA5D,CAAjB;AACJ;;AAEF,aAAK,MAAL;AACI4C,UAAAA,QAAQ,CAACE,KAAT,GAAiB,SAAjB;AACEF,UAAAA,QAAQ,CAACC,KAAT,GAAiB9C,MAAM,GAAGG,IAAT,CAAcA,IAAd,EAAoBU,IAApB,CAAyB8B,CAAzB,EAA4BlC,GAA5B,CAAgCgC,SAAS,CAAC9B,SAA1C,EAAqDV,MAArD,CAA4D,YAA5D,CAAjB;AAEJ;;AACF,gBArBF,CAsBM;;AAtBN,OAN8B,CA8B9B;;;AACA,UAAGwC,SAAS,CAACO,QAAV,KAAuB,QAA1B,EAAmC;AACjC9C,QAAAA,MAAM,CAAC+C,IAAP,CAAYJ,QAAZ;AACD,OAFD,MAEK;AACH,YAAG/B,SAAS,KAAKoC,SAAjB,EAA2B;AACzB,cAAGlD,MAAM,CAAC6C,QAAQ,CAACC,KAAV,CAAN,CAAuBK,SAAvB,CAAiCrC,SAAjC,EAA4C4B,OAA5C,CAAH,EAAwD;AACtD,gBAAIU,QAAQ,CAACpD,MAAM,CAAC6C,QAAQ,CAACC,KAAV,CAAN,CAAuB7C,MAAvB,CAA8B,MAA9B,CAAD,CAAR,GAAkD,CAAnD,KAA0D,CAA7D,EAA+D;AAC7D,kBAAGwC,SAAS,CAAC7B,IAAV,KAAmB,GAAtB,EAA0B;AACvBwC,gBAAAA,QAAQ,CAACpD,MAAM,CAAC6C,QAAQ,CAACC,KAAV,CAAN,CAAuB7C,MAAvB,CAA8B,GAA9B,IAAqC,CAAtC,CAAR,KAAqD,CAAtD,GAA2DC,MAAM,CAAC+C,IAAP,CAAYJ,QAAZ,CAA3D,GAAkF,CAAlF;AACD,eAFD,MAEK;AACAO,gBAAAA,QAAQ,CAACpD,MAAM,CAAC6C,QAAQ,CAACC,KAAV,CAAN,CAAuB7C,MAAvB,CAA8B,GAA9B,IAAqC,CAAtC,CAAR,KAAqD,CAAtD,GAA2DC,MAAM,CAAC+C,IAAP,CAAYJ,QAAZ,CAA3D,GAAkF,CAAlF;AACH;AACF,aAND,MAMK;AACH,kBAAGJ,SAAS,CAAC7B,IAAV,KAAmB,GAAtB,EAA0B;AACvBwC,gBAAAA,QAAQ,CAACpD,MAAM,CAAC6C,QAAQ,CAACC,KAAV,CAAN,CAAuB7C,MAAvB,CAA8B,GAA9B,IAAqC,CAAtC,CAAR,KAAqD,CAAtD,GAA2DC,MAAM,CAAC+C,IAAP,CAAYJ,QAAZ,CAA3D,GAAkF,CAAlF;AACD,eAFD,MAEK;AACFO,gBAAAA,QAAQ,CAACpD,MAAM,CAAC6C,QAAQ,CAACC,KAAV,CAAN,CAAuB7C,MAAvB,CAA8B,GAA9B,IAAqC,CAAtC,CAAR,KAAqD,CAAtD,GAA2DC,MAAM,CAAC+C,IAAP,CAAYJ,QAAZ,CAA3D,GAAkF,CAAlF;AACD;AACF;AACF;AACF,SAhBD,MAgBK;AACH,cAAIO,QAAQ,CAACpD,MAAM,CAAC6C,QAAQ,CAACC,KAAV,CAAN,CAAuB7C,MAAvB,CAA8B,MAA9B,CAAD,CAAR,GAAkD,CAAnD,KAA0D,CAA7D,EAA+D;AAC7D,gBAAGwC,SAAS,CAAC7B,IAAV,KAAmB,GAAtB,EAA0B;AACvBwC,cAAAA,QAAQ,CAACpD,MAAM,CAAC6C,QAAQ,CAACC,KAAV,CAAN,CAAuB7C,MAAvB,CAA8B,GAA9B,IAAqC,CAAtC,CAAR,KAAqD,CAAtD,GAA2DC,MAAM,CAAC+C,IAAP,CAAYJ,QAAZ,CAA3D,GAAkF,CAAlF;AACD,aAFD,MAEK;AACFO,cAAAA,QAAQ,CAACpD,MAAM,CAAC6C,QAAQ,CAACC,KAAV,CAAN,CAAuB7C,MAAvB,CAA8B,GAA9B,IAAqC,CAAtC,CAAR,KAAqD,CAAtD,GAA2DC,MAAM,CAAC+C,IAAP,CAAYJ,QAAZ,CAA3D,GAAkF,CAAlF;AACD;AACF,WAND,MAMK;AACH,gBAAGJ,SAAS,CAAC7B,IAAV,KAAmB,GAAtB,EAA0B;AACvBwC,cAAAA,QAAQ,CAACpD,MAAM,CAAC6C,QAAQ,CAACC,KAAV,CAAN,CAAuB7C,MAAvB,CAA8B,GAA9B,IAAqC,CAAtC,CAAR,KAAqD,CAAtD,GAA2DC,MAAM,CAAC+C,IAAP,CAAYJ,QAAZ,CAA3D,GAAkF,CAAlF;AACD,aAFD,MAEK;AACH;AACCO,cAAAA,QAAQ,CAAC,CAACpD,MAAM,CAACyC,SAAS,CAAC3B,SAAX,CAAN,CAA4Bb,MAA5B,CAAmC,GAAnC,IAA0CD,MAAM,CAAC6C,QAAQ,CAACC,KAAV,CAAN,CAAuB7C,MAAvB,CAA8B,GAA9B,CAA3C,IAAiF,CAAlF,CAAR,KAAiG,CAAlG,GAAuGC,MAAM,CAAC+C,IAAP,CAAYJ,QAAZ,CAAvG,GAA8H,CAA9H;AACD;AACF;AACF;AACF;AACF,KA3E8F,CA4E/F;;AACD,GA7ED;;AA+EA,MAAIQ,sBAAsB,GAAG,SAASA,sBAAT,CAAgCC,eAAhC,EAAiD;AAC5E,QAAIC,QAAQ,GAAG,uHAAf;AACA,QAAIC,UAAU,GAAG,CAAjB;AACAF,IAAAA,eAAe,CAACG,OAAhB,CAAwB,UAASC,IAAT,EAAc;AACpC,cAAQA,IAAI,CAACC,IAAb;AACE,aAAK,MAAL;AACEJ,UAAAA,QAAQ,IAAI,sCAAsCvD,MAAM,CAAC0D,IAAI,CAACE,SAAN,CAAN,CAAuB3D,MAAvB,CAA8B,oBAA9B,CAAtC,GAA4F,SAA5F,GAAwGyD,IAAI,CAACG,WAA7G,GAA2H,IAA3H,GAAkIH,IAAI,CAACI,IAAvI,GAA8I,UAA1J;AACAN,UAAAA,UAAU;AACV;;AAEF,aAAK,YAAL;AACE,cAAGxD,MAAM,CAAC0D,IAAI,CAACK,MAAN,CAAN,CAAoBhC,KAApB,MAA+B/B,MAAM,GAAG+B,KAAT,EAAlC,EAAmD;AACjDwB,YAAAA,QAAQ,IAAI,qCAAqCvD,MAAM,CAAC0D,IAAI,CAACK,MAAN,CAAN,CAAoB9D,MAApB,CAA2B,oBAA3B,CAArC,GAAwF,SAAxF,GAAoGyD,IAAI,CAACG,WAAzG,GAAuH,IAAvH,GAA8HH,IAAI,CAACI,IAAnI,GAA0I,UAAtJ;AACAN,YAAAA,UAAU;AACX;;AACD;;AAEF,aAAK,UAAL;AACE,cAAGxD,MAAM,CAAC0D,IAAI,CAACK,MAAN,CAAN,CAAoBhC,KAApB,MAA+B/B,MAAM,GAAG+B,KAAT,EAAlC,EAAmD;AACjDwB,YAAAA,QAAQ,IAAI,mCAAmCvD,MAAM,CAAC0D,IAAI,CAACK,MAAN,CAAN,CAAoB9D,MAApB,CAA2B,oBAA3B,CAAnC,GAAsF,SAAtF,GAAkGyD,IAAI,CAACG,WAAvG,GAAqH,IAArH,GAA4HH,IAAI,CAACI,IAAjI,GAAwI,UAApJ;AACAN,YAAAA,UAAU;AACX;;AACD;;AACF;AACED,UAAAA,QAAQ,IAAI,sCAAsCvD,MAAM,CAAC0D,IAAI,CAACE,SAAN,CAAN,CAAuB3D,MAAvB,CAA8B,oBAA9B,CAAtC,GAA4F,2CAA5F,GAA0ID,MAAM,CAAC0D,IAAI,CAACK,MAAN,CAAN,CAAoB9D,MAApB,CAA2B,oBAA3B,CAA1I,GAA6L,SAA7L,GAAyMyD,IAAI,CAACG,WAA9M,GAA4N,IAA5N,GAAmOH,IAAI,CAACI,IAAxO,GAA+O,UAA3P;AACAN,UAAAA,UAAU;AArBd;AAuBD,KAxBD;;AAyBA,QAAGA,UAAU,GAAG,CAAhB,EAAkB;AAChB,UAAIQ,SAAS,GAAGC,MAAM,CAACC,UAAP,IAAqBC,QAAQ,CAACC,IAAT,CAAcC,WAAnD;;AACA,UAAGL,SAAS,GAAG,GAAf,EAAmB;AACjBG,QAAAA,QAAQ,CAACG,aAAT,CAAuB,sBAAvB,EAA+CC,SAA/C,GAA2DhB,QAA3D;AACAY,QAAAA,QAAQ,CAACK,cAAT,CAAwB,iBAAxB,EAA2CC,SAA3C,GAAuD,QAAvD;AACAN,QAAAA,QAAQ,CAACK,cAAT,CAAwB,6BAAxB,EAAuDE,gBAAvD,CAAwE,OAAxE,EAAiFC,0BAAjF;AACD;AACF;AACF,GApCD;;AAqCA,MAAIC,qBAAqB,GAAG,SAASA,qBAAT,CAA+BtB,eAA/B,EAAgD;AAC1E,QAAGA,eAAe,CAACuB,MAAnB,EAA0B;AACxBxB,MAAAA,sBAAsB,CAACC,eAAD,CAAtB;AACD;AACF,GAJD;;AAKA,MAAIqB,0BAA0B,GAAG,SAASA,0BAAT,GAAsC;AACrER,IAAAA,QAAQ,CAACK,cAAT,CAAwB,iBAAxB,EAA2CC,SAA3C,GAAuD,EAAvD;AACD,GAFD;;AAGA,MAAIK,aAAa,GAAG,SAASA,aAAT,CAAuBC,QAAvB,EAAiCC,QAAjC,EAA2C;AAC5D;AACD,QAAIC,YAAY,GAAG7E,iBAAiB,CAAC2E,QAAD,CAApC,CAF6D,CAG7D;AACA;;AACA,QAAIG,WAAW,GAAIlF,MAAM,GAAG+B,KAAT,KAAmB,CAAtC;AACA,QAAIoD,UAAU,GAAGnF,MAAM,GAAGG,IAAT,EAAjB;AAEAkC,IAAAA,cAAc,CAAElC,IAAI,GAAC,CAAP,EAAW2B,WAAW,CAAE3B,IAAI,GAAC,CAAP,CAAX,GAAwB2B,WAAW,CAAC3B,IAAD,CAAnC,GAA4C2B,WAAW,CAAE3B,IAAI,GAAC,CAAP,CAAlE,EAA8E,SAA9E,EAAwF8E,YAAY,CAACzE,KAArG,CAAd;AACA6B,IAAAA,cAAc,CAAElC,IAAI,GAAC,CAAP,EAAW2B,WAAW,CAAE3B,IAAI,GAAC,CAAP,CAAX,GAAwB2B,WAAW,CAAC3B,IAAD,CAAnC,GAA4C2B,WAAW,CAAE3B,IAAI,GAAC,CAAP,CAAlE,EAA8E,SAA9E,EAAwF8E,YAAY,CAACvE,SAArG,CAAd;AACA2B,IAAAA,cAAc,CAAElC,IAAI,GAAC,CAAP,EAAW2B,WAAW,CAAE3B,IAAI,GAAC,CAAP,CAAX,GAAwB2B,WAAW,CAAC3B,IAAD,CAAnC,GAA4C2B,WAAW,CAAE3B,IAAI,GAAC,CAAP,CAAlE,EAA8E,MAA9E,EAAqF8E,YAAY,CAACjE,IAAlG,CAAd,CAV6D,CAW7D;;AACAoE,IAAAA,CAAC,CAACC,IAAF,CAAO;AACHC,MAAAA,GAAG,EAAG,uDAAuDN,QAAvD,GAAkE,QAAlE,GAA6EG,UAA7E,GAA0F,SAA1F,GAAsGD,WAAtG,GAAoH,GADvH;AAEHvB,MAAAA,IAAI,EAAG,KAFJ;AAGH4B,MAAAA,QAAQ,EAAC,MAHN;AAIHC,MAAAA,OAAO,EAAG,iBAASC,QAAT,EAAmB;AAC3B;AACA,YAAIC,cAAc,GAAG,IAArB;AACA,YAAIC,YAAY,GAAG,IAAnB;AACAF,QAAAA,QAAQ,CAACG,OAAT,CAAiBnC,OAAjB,CAAyB,UAASC,IAAT,EAAc;AACrC,cAAGA,IAAI,CAACmC,OAAL,IAAgB,YAAnB,EAAgC;AAC9B,oBAAQnC,IAAI,CAACC,IAAb;AACE,mBAAK,UAAL;AACEsB,gBAAAA,YAAY,CAAChE,IAAb,CAAkByB,OAAlB,GAA4BgB,IAAI,CAACK,MAAjC;AACA2B,gBAAAA,cAAc,GAAGhC,IAAI,CAACK,MAAtB;AACA;;AACF;AACEkB,gBAAAA,YAAY,CAAChE,IAAb,CAAkBH,SAAlB,GAA8B4C,IAAI,CAACK,MAAnC;AACF4B,gBAAAA,YAAY,GAAKjC,IAAI,CAACK,MAAtB;AAPF;AASD;AACF,SAZD;AAaF1B,QAAAA,cAAc,CAAElC,IAAI,GAAC,CAAP,EAAW2B,WAAW,CAAE3B,IAAI,GAAC,CAAP,CAAX,GAAwB2B,WAAW,CAAC3B,IAAD,CAAnC,GAA4C2B,WAAW,CAAE3B,IAAI,GAAC,CAAP,CAAlE,EAA8E,YAA9E,EAA2F8E,YAAY,CAAChE,IAAxG,EAA6GyE,cAA7G,EAA4HC,YAA5H,CAAd,CAjB6B,CAmBjC;AACA;AACA;AACM;;AACAf,QAAAA,qBAAqB,CAACa,QAAQ,CAACG,OAAV,CAArB;;AACA,YAAG9F,iBAAH,EAAqB;AACnB;AACAsF,UAAAA,CAAC,CAAC,WAAD,CAAD,CAAeU,YAAf,CAA4B;AAC1BC,YAAAA,aAAa,EAAE;AACVC,cAAAA,WAAW,EAAE;AACTC,gBAAAA,IAAI,EAAE,OADG;AAETC,gBAAAA,KAAK,EAAE,iBAAW;AACdjC,kBAAAA,MAAM,CAACkC,KAAP;AACH;AAJQ;AADH,aADW;AAS1BC,YAAAA,MAAM,EAAE;AACNC,cAAAA,IAAI,EAAE,WADA;AAENC,cAAAA,MAAM,EAAE,OAFF;AAGNC,cAAAA,KAAK,EAAE;AAHD,aATkB;AAc1BC,YAAAA,WAAW,EAAEzG,KAda;AAe1B0G,YAAAA,QAAQ,EAAE,KAfgB;AAeT;AACjB;AACAC,YAAAA,QAAQ,EAAE,IAjBgB;AAkB1BxG,YAAAA,MAAM,EAAEA;AAlBkB,WAA5B;AAoBAJ,UAAAA,iBAAiB,GAAG,KAApB;AACD,SAvBD,MAuBK;AACC;AACJsF,UAAAA,CAAC,CAAC,WAAD,CAAD,CAAeU,YAAf,CAA6B,gBAA7B,EAA+C5F,MAA/C;AACD;AACF,OAvDE;AAwDHyG,MAAAA,KAAK,EAAG,eAASC,OAAT,EAAiBD,MAAjB,EAAuB,CAC7B;AACD;AA1DE,KAAP;AA4DD,GAxED;;AA0EA,MAAIE,qBAAqB,GAAG,SAASA,qBAAT,GAAiC;AAC3D,QAAIC,QAAQ,GAAG3C,QAAQ,CAACG,aAAT,CAAuB,cAAvB,EAAuCC,SAAvC,CAAiDwC,KAAjD,CAAuD,GAAvD,CAAf;AACA,QAAI/B,QAAQ,GAAGb,QAAQ,CAACG,aAAT,CAAuB,wBAAvB,EAAiD0C,KAAhE;AACA,QAAIC,WAAW,GAAG,EAAlB;AACA,QAAIC,IAAI,GAAGJ,QAAQ,CAACjC,MAApB;AACAiC,IAAAA,QAAQ,CAACrD,OAAT,CAAiB,UAASC,IAAT,EAAeyD,KAAf,EAAsB;AACrCF,MAAAA,WAAW,IAAIvD,IAAf;AACEyD,MAAAA,KAAK,GAAGD,IAAT,IAAmBC,KAAK,GAAG,CAAT,KAAgBD,IAAnC,GAA2CD,WAAW,IAAI,GAA1D,GAA+D,CAA/D;AACD,KAHD,EAL2D,CAS3D;AACA;;AACA,QAAIG,GAAG,GAAGjD,QAAQ,CAACG,aAAT,CAAuB,qCAAvB,EAA8D0C,KAAxE;AACA,QAAIK,GAAG,GAAGlD,QAAQ,CAACG,aAAT,CAAuB,qCAAvB,EAA8D0C,KAAxE,CAZ2D,CAa3D;;AACA5B,IAAAA,CAAC,CAACkC,OAAF,CAAU,wHAAsHF,GAAtH,GAA0H,MAA1H,GAAiIC,GAAjI,GAAqI,+YAA/I,EAAiiB,UAAUhH,IAAV,EAAiB4D,MAAjB,EAAyB;AACxjB;AACA,UAAIiB,WAAW,GAAIlF,MAAM,GAAG+B,KAAT,KAAmB,CAAtC;AACA,UAAIoD,UAAU,GAAGnF,MAAM,GAAGG,IAAT,EAAjB;AACAmF,MAAAA,GAAG,GAAG,uDAAuDjF,IAAI,CAACkH,QAAL,CAAc,CAAd,EAAiBC,UAAjB,CAA4BC,GAAnF,GAA0F,QAA1F,GAAqGtC,UAArG,GAAkH,SAAlH,GAA8HD,WAA9H,GAA4I,GAAlJ,CAJwjB,CAKxjB;;AACAE,MAAAA,CAAC,CAACC,IAAF,CAAO;AACL;AACAC,QAAAA,GAAG,EAAGA,GAFD;AAGL3B,QAAAA,IAAI,EAAG,KAHF;AAIL4B,QAAAA,QAAQ,EAAC,MAJJ;AAKLC,QAAAA,OAAO,EAAG,iBAASC,QAAT,EAAmB;AAC1B;AACAX,UAAAA,aAAa,CAACW,QAAD,EAAWT,QAAX,CAAb,CAF0B,CAES;AAErC;AATI,OAAP;AAYD,KAlBD;AAmBD,GAjCD;;AAkCA,MAAI0C,aAAa,GAAG,SAASA,aAAT,GAAyB;AAC3C,QAAGvD,QAAQ,CAACG,aAAT,CAAuB,eAAvB,EAAwCG,SAAxC,KAAsD,QAAzD,EAAkE;AAChEN,MAAAA,QAAQ,CAACG,aAAT,CAAuB,eAAvB,EAAwCG,SAAxC,GAAoD,EAApD;AACAvE,MAAAA,MAAM,CAAC2E,MAAP,GAAgB,CAAhB;AACAO,MAAAA,CAAC,CAAC,WAAD,CAAD,CAAeU,YAAf,CAA4B,cAA5B;AACC3B,MAAAA,QAAQ,CAACG,aAAT,CAAuB,OAAvB,EAAgCG,SAAhC,KAA8C,QAA/C,GAA2D,CAA3D,GAA+DN,QAAQ,CAACG,aAAT,CAAuB,OAAvB,EAAgCG,SAAhC,GAA4C,QAA3G;AACD,KALD,MAKK;AACHN,MAAAA,QAAQ,CAACG,aAAT,CAAuB,eAAvB,EAAwCG,SAAxC,GAAoD,QAApD;AACD;AACF,GATD;;AAUA,MAAIkD,eAAe,GAAG,SAASA,eAAT,GAA2B;AAC/Cd,IAAAA,qBAAqB;AACpB1C,IAAAA,QAAQ,CAACG,aAAT,CAAuB,OAAvB,EAAgCG,SAAhC,KAA8C,QAA/C,GAA2DN,QAAQ,CAACG,aAAT,CAAuB,OAAvB,EAAgCG,SAAhC,GAA4C,EAAvG,GAA4G,CAA5G;AACAiD,IAAAA,aAAa;AACd,GAJD;;AAKA,MAAIE,iBAAiB,GAAG,SAASA,iBAAT,CAA2BtC,GAA3B,EAAgCjF,IAAhC,EAAsCmF,OAAtC,EAA+C;AACrE,QAAIqC,MAAM,GAAG,OAAOxH,IAAP,IAAe,QAAf,GAA0BA,IAA1B,GAAiCyH,MAAM,CAACC,IAAP,CAAY1H,IAAZ,EAAkB2H,GAAlB,CACtC,UAASC,CAAT,EAAW;AAAE,aAAOC,kBAAkB,CAACD,CAAD,CAAlB,GAAwB,GAAxB,GAA8BC,kBAAkB,CAAC7H,IAAI,CAAC4H,CAAD,CAAL,CAAvD;AAAmE,KAD1C,EAExCE,IAFwC,CAEnC,GAFmC,CAA9C,CADqE,CAIrE;;AACA,QAAIC,GAAG,GAAGnE,MAAM,CAACoE,cAAP,GAAwB,IAAIA,cAAJ,EAAxB,GAA+C,IAAIC,aAAJ,CAAkB,mBAAlB,CAAzD;AACAF,IAAAA,GAAG,CAACG,IAAJ,CAAS,MAAT,EAAiBjD,GAAjB;;AACA8C,IAAAA,GAAG,CAACI,MAAJ,GAAc,YAAW;AACvB,UAAIJ,GAAG,CAACK,UAAJ,GAAe,CAAf,IAAoB7G,IAAI,CAAC8G,KAAL,CAAWN,GAAG,CAACO,MAAJ,GAAa,GAAxB,KAAgC,CAAxD,EAA2D;AACzD;AACAnD,QAAAA,OAAO,CAAC4C,GAAG,CAACQ,YAAL,CAAP;AACD,OAHD,MAGK;AACH;AACAzE,QAAAA,QAAQ,CAACG,aAAT,CAAuB,8BAAvB,EAAuDC,SAAvD,GAAmE,yDAAnE;AACAJ,QAAAA,QAAQ,CAACG,aAAT,CAAuB,sBAAvB,EAA+CG,SAA/C,GAA2D,4BAA3D;AACD;AACF,KATD;;AAUA2D,IAAAA,GAAG,CAACS,gBAAJ,CAAqB,kBAArB,EAAyC,gBAAzC;AACAT,IAAAA,GAAG,CAACS,gBAAJ,CAAqB,cAArB,EAAqC,mCAArC;AACAT,IAAAA,GAAG,CAAC1D,gBAAJ,CAAqB,OAArB,EAA8B,UAASoE,CAAT,EAAW,CACzC;AACC,KAFD;AAGAV,IAAAA,GAAG,CAACW,IAAJ,CAASlB,MAAT;AACA,WAAOO,GAAP;AACD,GAxBD;;AAyBA,MAAIY,gBAAgB,GAAG,SAASA,gBAAT,CAA0BC,MAA1B,EAAiC;AACtD,QAAIC,SAAS,GAAG,EAAhB,CADsD,CAEtD;;AACAA,IAAAA,SAAS,GAAGD,MAAM,CAAClC,KAAP,CAAa,GAAb,EAAkB,CAAlB,CAAZ,CAHsD,CAItD;AACA;;AACAmC,IAAAA,SAAS,GAAGA,SAAS,CAACnC,KAAV,CAAgB,GAAhB,EAAqB,CAArB,IAA0BmC,SAAS,CAACnC,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAtC,CANsD,CAOtD;AACA;;AACAmC,IAAAA,SAAS,GAAGA,SAAS,CAACnC,KAAV,CAAgB,GAAhB,EAAqB,CAArB,IAA0BmC,SAAS,CAACnC,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAtC,CATsD,CAUtD;;AACA,WAAOmC,SAAP;AACD,GAZD;;AAaA,MAAIC,iBAAiB,GAAG,SAASA,iBAAT,GAA4B;AAClD,QAAIC,WAAW,GAAGjF,QAAQ,CAACK,cAAT,CAAwB,cAAxB,EAAwCwC,KAA1D;AACA,QAAIqC,CAAC,GAAG,+DAA+DC,IAA/D,CAAoEF,WAApE,CAAR;AACAA,IAAAA,WAAW,GAAGJ,gBAAgB,CAACI,WAAD,CAA9B;;AACA,QAAGC,CAAH,EAAK;AACH,UAAIrE,QAAQ,GAAG,EAAf;AACA,UAAIuE,cAAc,GAAG,EAArB;AACA,UAAIC,gBAAgB,GAAGrF,QAAQ,CAACsF,gBAAT,CAA0B,yCAA1B,CAAvB;;AACA,WAAK,IAAI9G,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6G,gBAAgB,CAAC3E,MAArC,EAA6ClC,CAAC,EAA9C,EAAkD;AAChD,YAAG6G,gBAAgB,CAAC7G,CAAD,CAAhB,CAAoB+G,OAAvB,EAA+B;AAC7B1E,UAAAA,QAAQ,IAAIwE,gBAAgB,CAAC7G,CAAD,CAAhB,CAAoBqE,KAApB,GAA4B,GAAxC;AACAuC,UAAAA,cAAc,IAAIC,gBAAgB,CAAC7G,CAAD,CAAhB,CAAoBgH,IAApB,GAA2B,GAA7C;AACD;AACF,OATE,CAUH;;;AACA,UAAG3E,QAAQ,KAAK,EAAhB,EAAmB;AACjB,YAAI3E,IAAI,GAAG;AACT,0BAAkB+I,WADT;AAET,4BAAkBpE,QAFT;AAGT,0BAAkBuE,cAHT;AAIT,qBAAYpF,QAAQ,CAACG,aAAT,CAAuB,cAAvB,EAAuCC,SAJ1C;AAKT,sBAAcJ,QAAQ,CAACG,aAAT,CAAuB,qCAAvB,EAA8D0C,KALnE;AAMT,uBAAc7C,QAAQ,CAACG,aAAT,CAAuB,qCAAvB,EAA8D0C;AANnE,SAAX,CADiB,CASjB;;AACAY,QAAAA,iBAAiB,CAAC,sDAAD,EAAyDvH,IAAzD,EAA+D,UAASoF,QAAT,EAAkB;AAC9F;AACAtB,UAAAA,QAAQ,CAACG,aAAT,CAAuB,oBAAvB,EAA6CG,SAA7C,GAAyD,0BAAzD;AACH,SAHgB,CAAjB;AAID,OAdD,MAcK;AACHN,QAAAA,QAAQ,CAACG,aAAT,CAAuB,8BAAvB,EAAuDC,SAAvD,GAAmE,wDAAnE;AACAJ,QAAAA,QAAQ,CAACG,aAAT,CAAuB,sBAAvB,EAA+CG,SAA/C,GAA2D,4BAA3D;AACD;AACF,KA7BD,MA6BK;AACHN,MAAAA,QAAQ,CAACG,aAAT,CAAuB,8BAAvB,EAAuDC,SAAvD,GAAmE,mDAAnE;AACAJ,MAAAA,QAAQ,CAACG,aAAT,CAAuB,sBAAvB,EAA+CG,SAA/C,GAA2D,4BAA3D;AACD;AACF,GArCD;;AAsCA,MAAImF,yBAAyB,GAAG,SAASA,yBAAT,CAAmCC,QAAnC,EAA4C;AAC1EA,IAAAA,QAAQ,CAACC,MAAT,CAAgBC,UAAhB,CAA2BtF,SAA3B,GAAuCoF,QAAQ,CAACC,MAAT,CAAgBC,UAAhB,CAA2BtF,SAA3B,CAAqCsC,KAArC,CAA2C,GAA3C,EAAgD,CAAhD,CAAvC;AACD,GAFD,CAvZ8B,CA0Z9B;AACA;AACA;AACA;AACA;;;AACA,MAAIiD,oBAAoB,GAAG7F,QAAQ,CAACsF,gBAAT,CAA0B,+BAA1B,CAA3B;;AACA,OAAK,IAAI9G,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqH,oBAAoB,CAACnF,MAAzC,EAAiDlC,CAAC,EAAlD,EAAsD;AACpDqH,IAAAA,oBAAoB,CAACrH,CAAD,CAApB,CAAwB+B,gBAAxB,CAAyC,OAAzC,EAAkD,UAASuF,CAAT,EAAW;AAC3DL,MAAAA,yBAAyB,CAACK,CAAD,CAAzB;AACD,KAFD;AAGD;;AACD9F,EAAAA,QAAQ,CAACG,aAAT,CAAuB,+BAAvB,EAAwDI,gBAAxD,CAAyE,OAAzE,EAAkFyE,iBAAlF;AACAhF,EAAAA,QAAQ,CAACK,cAAT,CAAwB,mBAAxB,EAA6CE,gBAA7C,CAA8D,OAA9D,EAAuEgD,aAAvE;AACAvD,EAAAA,QAAQ,CAACG,aAAT,CAAuB,qBAAvB,EAA8CI,gBAA9C,CAA+D,OAA/D,EAAwEiD,eAAxE;AACD,CAxaoB,CAwalB1D,MAxakB,CAArB","file":"module.event.3eb57239.js","sourceRoot":"..","sourcesContent":["var calendarEvents = (function(){\n  var firstLoadCalendar = true;\n  var today = moment().format();\n  //console.log(\"today\" , today)\n  var events = [];\n  var year = moment().year();\n  var createEventObject = function createEventObject(data) {\n  //  console.log (\"data from line 7 \" , data)\n    let  tempEventObject = {\n      'trash': {\n        \"dayOfWeek\": data.next_pickups.trash.day,\n        \"schedule\": \"weekly\",\n        \"AorB\": null,\n        \"startDate\": null,\n        \"endDate\": null\n      },\n      \"recycling\": {\n        \"dayOfWeek\": null,\n        \"schedule\": \"biweekly\",\n        \"AorB\": null,\n        \"startDate\": null,\n        \"endDate\": null\n      },\n      \"bulk\": {\n        \"dayOfWeek\": null,\n        \"schedule\": \"biweekly\",\n        \"AorB\": null,\n        \"startDate\": null,\n        \"endDate\": null\n      },\n      \"yard\": {\n        \"dayOfWeek\": null,\n        \"schedule\": \"biweekly\",\n        \"AorB\": null,\n        \"startDate\": null,\n        \"endDate\": null\n      }\n    };\n    tempEventObject.recycling.dayOfWeek = data.next_pickups.recycling.day;\n    tempEventObject.recycling.AorB = data.next_pickups.recycling.week;\n    tempEventObject.recycling.startDate = data.next_pickups.recycling.next_pickup;\n\n    tempEventObject.bulk.dayOfWeek = data.next_pickups.bulk.day;\n    tempEventObject.bulk.AorB = data.next_pickups.bulk.week;\n    tempEventObject.bulk.startDate = data.next_pickups.bulk.next_pickup;\n\n    tempEventObject.trash.dayOfWeek = data.next_pickups.trash.day;\n    tempEventObject.trash.AorB = data.next_pickups.trash.week;\n    tempEventObject.trash.startDate = data.next_pickups.trash.next_pickup;\n\n    tempEventObject.yard.dayOfWeek = data.next_pickups.trash.day;\n    tempEventObject.yard.AorB = data.next_pickups.trash.week;\n\n        return tempEventObject;\n  };\n  function getWeekNumber(d) {\n    // Copy date so don't modify original\n    d = new Date(+d);\n    d.setHours(0,0,0);\n    // Set to nearest Thursday: current date + 4 - current day number\n    // Make Sunday's day number 7\n    d.setDate(d.getDate() + 4 - (d.getDay()||7));\n    // Get first day of year\n    var yearStart = new Date(d.getFullYear(),0,1);\n    //console.log(\"new Date(d.getFullYear(),0,1)\"+new Date(d.getFullYear(),0,1))\n    // Calculate full weeks to nearest Thursday\n    var weekNo = Math.ceil(( ( (d - yearStart) / 86400000) + 1)/7);\n    // Return array of year and week number\n    return [d.getFullYear(), weekNo];\n  }\n\n  function weeksInYear(year) {\n    var month = 11, day = 31, week;\n    // Find week that 31 Dec is in. If is first week, reduce date until\n    // get previous week.\n    do {\n      d = new Date(year, month, day--);\n      week = getWeekNumber(d)[1];\n    } while (week == 1);\n    return week;\n  }\n  function capitalizeFirstLetter(string) {\n      return string.charAt(0).toUpperCase() + string.slice(1);\n  }\n  var addEventToList = function addeEventToList(year,weeks,eventType,eventInfo,startDate, endDate) {\n    // Add garbage pickup day every week\n    // console.log(year);\n    // console.log(weeks);\n    // console.log(eventType);\n    // console.log(\"eventInfo \",eventInfo);\n    // console.log(startDate);\n    // console.log(endDate);\n    for (var i = 1; i < weeks; i++) {\n      let title = eventType + ' pick up';\n      let eventObj = {\n        title : title,\n        start : ''\n      };\n      switch (eventType) {\n        case 'Garbage':\n            eventObj.color = '#BD0019';\n              eventObj.start = moment().year(year).week(i).day(eventInfo.dayOfWeek).format(\"YYYY-MM-DD\");\n          break;\n\n        case 'Recycle':\n            eventObj.color = '#068A24';\n              eventObj.start = moment().year(year).week(i).day(eventInfo.dayOfWeek).format(\"YYYY-MM-DD\");\n          break;\n\n        case 'Yard waste':\n            eventObj.color = '#DF5800';\n              eventObj.start = moment().year(year).week(i).day(eventInfo.dayOfWeek).format(\"YYYY-MM-DD\");\n          break;\n\n        case 'Bulk':\n            eventObj.color = '#114BC7';\n              eventObj.start = moment().year(year).week(i).day(eventInfo.dayOfWeek).format(\"YYYY-MM-DD\");\n\n          break;\n        default:\n            //console.log(\"addto list\" + moment().year(year).week(i).day(eventInfo.dayOfWeek).format(\"YYYY-MM-DD\"))\n      }\n      // console.log(eventObj);\n      if(eventInfo.schedule === 'weekly'){\n        events.push(eventObj);\n      }else{\n        if(startDate !== undefined){\n          if(moment(eventObj.start).isBetween(startDate, endDate)){\n            if((parseInt(moment(eventObj.start).format('YYYY')) % 2) !== 0){\n              if(eventInfo.AorB === 'a'){\n                (parseInt(moment(eventObj.start).format('W') % 2) === 0) ? events.push(eventObj): 0;\n              }else{\n                  (parseInt(moment(eventObj.start).format('W') % 2) !== 0) ? events.push(eventObj): 0;\n              }\n            }else{\n              if(eventInfo.AorB === 'a'){\n                (parseInt(moment(eventObj.start).format('W') % 2) !== 0) ? events.push(eventObj): 0;\n              }else{\n                (parseInt(moment(eventObj.start).format('W') % 2) === 0) ? events.push(eventObj): 0;\n              }\n            }\n          }\n        }else{\n          if((parseInt(moment(eventObj.start).format('YYYY')) % 2) !== 0){\n            if(eventInfo.AorB === 'a'){\n              (parseInt(moment(eventObj.start).format('W') % 2) === 0) ? events.push(eventObj): 0;\n            }else{\n              (parseInt(moment(eventObj.start).format('W') % 2) !== 0) ? events.push(eventObj): 0;\n            }\n          }else{\n            if(eventInfo.AorB === 'a'){\n              (parseInt(moment(eventObj.start).format('W') % 2) !== 0) ? events.push(eventObj): 0;\n            }else{\n              //console.log(\"bulk differnce \" + eventInfo.startDate + ' '+moment(eventInfo.startDate).format('W') + \"  \" + moment(eventObj.start).format('W') , moment(eventInfo.startDate).format('W') - moment(eventObj.start).format('W')  );\n              (parseInt((moment(eventInfo.startDate).format('W') - moment(eventObj.start).format('W')) % 2) === 0) ? events.push(eventObj): 0;\n            }\n          }\n        }\n      }\n    }\n    // console.log(events);\n  };\n\n  var loadEmergencyEventInfo = function loadEmergencyEventInfo(emergencyObjArr) {\n    let tempHtml = '<h3>NOTICE</h3><article id=\"close-emergency-modal-btn-2\"><img src=\"assets/img/error.png\" alt=\"close\"></img></article>';\n    let alertCount = 0;\n    emergencyObjArr.forEach(function(item){\n      switch (item.type) {\n        case 'info':\n          tempHtml += '<p><strong>Normal Date:</strong> ' + moment(item.normalDay).format(\"dddd, MMMM Do YYYY\") + '</p><p>' + item.description + '. ' + item.note + '</p><hr>';\n          alertCount++;\n          break;\n\n        case 'start-date':\n          if(moment(item.newDay).month() == moment().month()){\n            tempHtml += '<p><strong>Start Date:</strong> ' + moment(item.newDay).format(\"dddd, MMMM Do YYYY\") + '</p><p>' + item.description + '. ' + item.note + '</p><hr>';\n            alertCount++;\n          }\n          break;\n\n        case 'end-date':\n          if(moment(item.newDay).month() == moment().month()){\n            tempHtml += '<p><strong>End Date:</strong> ' + moment(item.newDay).format(\"dddd, MMMM Do YYYY\") + '</p><p>' + item.description + '. ' + item.note + '</p><hr>';\n            alertCount++;\n          }\n          break;\n        default:\n          tempHtml += '<p><strong>Normal Date:</strong> ' + moment(item.normalDay).format(\"dddd, MMMM Do YYYY\") + '</p><p><strong>Reschedule Date:</strong> ' + moment(item.newDay).format(\"dddd, MMMM Do YYYY\") + '</p><p>' + item.description + '. ' + item.note + '</p><hr>';\n          alertCount++;\n      }\n    });\n    if(alertCount > 0){\n      let tempWidth = window.innerWidth || document.body.clientWidth;\n      if(tempWidth > 400){\n        document.querySelector('.emergency-container').innerHTML = tempHtml;\n        document.getElementById('emergency-modal').className = 'active';\n        document.getElementById('close-emergency-modal-btn-2').addEventListener('click', closeDisplayEmergencyEvent);\n      }\n    }\n  };\n  var displayEmergencyEvent = function displayEmergencyEvent(emergencyObjArr) {\n    if(emergencyObjArr.length){\n      loadEmergencyEventInfo(emergencyObjArr);\n    }\n  };\n  var closeDisplayEmergencyEvent = function closeDisplayEmergencyEvent() {\n    document.getElementById('emergency-modal').className = '';\n  };\n  var startCalendar = function startCalendar(sendData, routeIDs) {\n     //console.log(\"senddata\", sendData);\n    var listOfEvents = createEventObject(sendData);\n    //console.log(\"listOfEvents \" , listOfEvents);\n    // console.log(year);\n    let todaysMonth =  moment().month() + 1;\n    let todaysYear = moment().year();\n\n    addEventToList((year-1),(weeksInYear((year-1)) + weeksInYear(year) + weeksInYear((year+1))),'Garbage',listOfEvents.trash);\n    addEventToList((year-1),(weeksInYear((year+1)) + weeksInYear(year) + weeksInYear((year+1))),'Recycle',listOfEvents.recycling);\n    addEventToList((year-1),(weeksInYear((year+1)) + weeksInYear(year) + weeksInYear((year+1))),'Bulk',listOfEvents.bulk);\n    // console.log( addEventToList((year-1),(weeksInYear((year-1)) + weeksInYear(year) + weeksInYear((year+1))),'Bulk',listOfEvents.Bulk))\n    $.ajax({\n        url : 'https://apis.detroitmi.gov/waste_schedule/details/' + routeIDs + '/year/' + todaysYear + '/month/' + todaysMonth + '/',\n        type : 'GET',\n        dataType:'json',\n        success : function(response) {\n          // console.log(response);\n          let yardWasteStart = null;\n          let yardWasteEnd = null;\n          response.details.forEach(function(item){\n            if(item.service == 'yard waste'){\n              switch (item.type) {\n                case 'end-date':\n                  listOfEvents.yard.endDate = item.newDay;\n                  yardWasteStart = item.newDay;\n                  break;\n                default:\n                  listOfEvents.yard.startDate = item.newDay;\n                yardWasteEnd   = item.newDay;\n              }\n            }\n          });\n        addEventToList((year-1),(weeksInYear((year-1)) + weeksInYear(year) + weeksInYear((year+1))),'Yard waste',listOfEvents.yard,yardWasteStart,yardWasteEnd);\n\n    // console.log(\"garbage\"+(weeksInYear((year+1))));\n    //  console.log(todaysMonth);\n    //  console.log(todaysYear);\n          //console.log(\"events\", events);\n          displayEmergencyEvent(response.details);\n          if(firstLoadCalendar){\n            //console.log(\"events 1\", events);\n            $('#calendar').fullCalendar({\n              customButtons: {\n                   printButton: {\n                       text: 'Print',\n                       click: function() {\n                           window.print();\n                       }\n                   }\n               },\n              header: {\n                left: 'prev,next',\n                center: 'title',\n                right: 'printButton'\n              },\n              defaultDate: today,\n              navLinks: false, // can click day/week names to navigate views\n              // businessHours: true, // display business hours\n              editable: true,\n              events: events\n            });\n            firstLoadCalendar = false;\n          }else{\n                //console.log(\"events 2\", events);\n            $('#calendar').fullCalendar( 'addEventSource', events );\n          }\n        },\n        error : function(request,error){\n          //console.log(\"Request: \"+JSON.stringify(request));\n        }\n    });\n  };\n\n  var startCalendarServices = function startCalendarServices() {\n    let tempAddr = document.querySelector('.street-name').innerHTML.split(' ');\n    let routeIDs = document.querySelector('input[name=\"route-id\"]').value;\n    let newTempAddr = '';\n    let size = tempAddr.length;\n    tempAddr.forEach(function(item, index) {\n      newTempAddr += item;\n      ((index < size) && (index + 1) !== size) ? newTempAddr += '+': 0;\n    });\n    // console.log(newTempAddr);\n    // console.log(routeIDs);\n    let lng = document.querySelector('.info-container > input[name=\"lng\"]').value;\n    let lat = document.querySelector('.info-container > input[name=\"lat\"]').value;\n    // console.log('lng:' + lng + ', lat:' + lat);\n    $.getJSON('https://gis.detroitmi.gov/arcgis/rest/services/DPW/2019Services/MapServer/0/query?where=&objectIds=&time=&geometry='+lng+'%2C+'+lat+'&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelWithin&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=&f=pjson' , function( data , window) {\n      //console.log(\"start data \",data);\n      let todaysMonth =  moment().month() + 1;\n      let todaysYear = moment().year();\n      url = 'https://apis.detroitmi.gov/waste_schedule/details/' + data.features[0].attributes.FID  + '/year/' + todaysYear + '/month/' + todaysMonth + '/';\n      //console.log(\"url from map \", url);\n      $.ajax({\n        // TODO change this to https\n        url : url,\n        type : 'GET',\n        dataType:'json',\n        success : function(response) {\n           //console.log(\"response  \",response);\n           startCalendar(response, routeIDs); //startCalendar(data, routeIDs);\n\n        }\n      });\n\n    });\n  };\n  var closeCalendar = function closeCalendar() {\n    if(document.querySelector('#box-calendar').className === 'active'){\n      document.querySelector('#box-calendar').className = '';\n      events.length = 0;\n      $('#calendar').fullCalendar('removeEvents');\n      (document.querySelector('#info').className === 'active') ? 0 : document.querySelector('#info').className = 'active';\n    }else{\n      document.querySelector('#box-calendar').className = 'active';\n    }\n  };\n  var loadCalendarNow = function loadCalendarNow() {\n    startCalendarServices();\n    (document.querySelector('#info').className === 'active') ? document.querySelector('#info').className = '' : 0;\n    closeCalendar();\n  };\n  var sendSignUpRequest = function sendSignUpRequest(url, data, success) {\n    var params = typeof data == 'string' ? data : Object.keys(data).map(\n            function(k){ return encodeURIComponent(k) + '=' + encodeURIComponent(data[k]); }\n        ).join('&');\n    // console.log(params);\n    var xhr = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject(\"Microsoft.XMLHTTP\");\n    xhr.open('POST', url);\n    xhr.onload  = function() {\n      if (xhr.readyState>3 && Math.trunc(xhr.status / 100) == 2) {\n        // console.log('xhr success');\n        success(xhr.responseText);\n      }else{\n        // console.log('xhr error');\n        document.querySelector('.invalid-phone-error-message').innerHTML = 'There was an error with your request. Please try again.';\n        document.querySelector('.phone-invalid-alert').className = 'phone-invalid-alert active';\n      }\n    };\n    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n    xhr.addEventListener(\"error\", function(e){\n    //  console.log(e);\n    });\n    xhr.send(params);\n    return xhr;\n  };\n  var stripPhoneNumber = function stripPhoneNumber(number){\n    let newNumber = '';\n    // console.log(number.split('('));\n    newNumber = number.split('(')[1];\n    // console.log(newNumber);\n    // console.log(newNumber.split(')'));\n    newNumber = newNumber.split(')')[0] + newNumber.split(')')[1];\n    // console.log(newNumber);\n    // console.log(newNumber.split('-'));\n    newNumber = newNumber.split('-')[0] + newNumber.split('-')[1];\n    // console.log(newNumber);\n    return newNumber;\n  }\n  var checkIfPhoneValid = function checkIfPhoneValid(){\n    let phoneNumber = document.getElementById('phone-number').value;\n    let a = /^(1\\s|1|)?((\\(\\d{3}\\))|\\d{3})(\\-|\\s)?(\\d{3})(\\-|\\s)?(\\d{4})$/.test(phoneNumber);\n    phoneNumber = stripPhoneNumber(phoneNumber);\n    if(a){\n      let routeIDs = '';\n      let servicesSignup = '';\n      let serviceCheckList = document.querySelectorAll('.service-check > input[type=\"checkbox\"]');\n      for (var i = 0; i < serviceCheckList.length; i++) {\n        if(serviceCheckList[i].checked){\n          routeIDs += serviceCheckList[i].value + ',';\n          servicesSignup += serviceCheckList[i].name + ',';\n        }\n      }\n      // console.log(routeIDs);\n      if(routeIDs !== ''){\n        let data = {\n          'phone_number'  : phoneNumber,\n          'waste_area_ids': routeIDs,\n          'service_type'  : servicesSignup,\n          'address' : document.querySelector('.street-name').innerHTML,\n          'latitude' :  document.querySelector('.info-container > input[name=\"lat\"]').value,\n          'longitude' : document.querySelector('.info-container > input[name=\"lng\"]').value\n        };\n        // console.log(data);\n        sendSignUpRequest('https://apis.detroitmi.gov/waste_notifier/subscribe/', data, function(response){\n            // console.log(response);\n            document.querySelector('.phone-valid-alert').className = 'phone-valid-alert active';\n        });\n      }else{\n        document.querySelector('.invalid-phone-error-message').innerHTML = 'Plese select one or more services to recive reminders.';\n        document.querySelector('.phone-invalid-alert').className = 'phone-invalid-alert active';\n      }\n    }else{\n      document.querySelector('.invalid-phone-error-message').innerHTML = 'Invalid number. Please enter re-enter you number.';\n      document.querySelector('.phone-invalid-alert').className = 'phone-invalid-alert active';\n    }\n  };\n  var closePhoneValidationAlert = function closePhoneValidationAlert(alertBox){\n    alertBox.target.parentNode.className = alertBox.target.parentNode.className.split(' ')[0];\n  };\n  // document.querySelectorAll('.close-phone-validation-alert').forEach(function(item){\n  //   item.addEventListener('click', function(b){\n  //     closePhoneValidationAlert(b);\n  //   });\n  // });\n  var phoneValidationAlert = document.querySelectorAll('.close-phone-validation-alert');\n  for (var i = 0; i < phoneValidationAlert.length; i++) {\n    phoneValidationAlert[i].addEventListener('click', function(b){\n      closePhoneValidationAlert(b);\n    });\n  }\n  document.querySelector('#reminder-form > .form_button').addEventListener('click', checkIfPhoneValid);\n  document.getElementById('back-to-infor-btn').addEventListener('click', closeCalendar);\n  document.querySelector('.calendar > article').addEventListener('click', loadCalendarNow);\n})(window);"]}